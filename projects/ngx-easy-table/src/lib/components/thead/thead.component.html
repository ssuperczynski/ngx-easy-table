<tr *ngIf="config.headerEnabled && !config.columnReorder">
  <th *ngIf="config.checkboxes || config.radio" [style.width]="'3%'">
    <ng-container
      *ngIf="selectAllTemplate && config.checkboxes"
      [ngTemplateOutlet]="selectAllTemplate"
      [ngTemplateOutletContext]="{ $implicit: onSelectAllBinded }"
    >
    </ng-container>
    <label for="selectAllCheckboxes" *ngIf="!selectAllTemplate && config.checkboxes">
      <input
        type="checkbox"
        class="form-check-input"
        id="selectAllCheckboxes"
        (change)="onSelectAll()"
      />
    </label>
  </th>
  <ng-container *ngFor="let column of columns; let colIndex = index; let last = last">
    <th
      [class.pinned-left]="column.pinned"
      [ngStyle]="{ 'left.px': column.pinned ? 150 * colIndex : null }"
      #th
      [style.width]="getColumnWidth(column)"
      (mousedown)="onMouseDown($event, th)"
      (mouseup)="onMouseUp($event)"
      (mousemove)="onMouseMove($event)"
    >
      <div
        (click)="orderBy(column)"
        style="display: inline"
        [class.pointer]="isOrderEnabled(column)"
      >
        <div class="ngx-table__header-title">
          {{ column.title }}<span>&nbsp;</span>
          <em class="ngx-icon ngx-icon-pin" *ngIf="column.pinned"></em>
          <div [style.display]="config.orderEnabled ? 'inline' : 'none'">
            <em *ngIf="'desc' === column.orderBy" class="ngx-icon ngx-icon-arrow-up"></em>
            <em *ngIf="'asc' === column.orderBy" class="ngx-icon ngx-icon-arrow-down"></em>
          </div>
        </div>
      </div>
      <ng-container *ngIf="column.headerActionTemplate">
        <button
          class="btn btn-sm btn-link btn-outline-light d-inline float-end"
          [cdkMenuTriggerFor]="menu"
        >
          <span class="ngx-icon ngx-icon-more"></span>
        </button>
        <ng-template #menu>
          <div class="ngx-menu" cdkMenu>
            <ng-container [ngTemplateOutlet]="headerActionTemplates[column.key]"></ng-container>
          </div>
        </ng-template>
      </ng-container>
      <div class="ngx-table__column-resizer" *ngIf="config.resizeColumn && !last"></div>
    </th>
  </ng-container>
  <th *ngIf="config.additionalActions || config.detailsTemplate || config.collapseAllRows">
    <div *ngIf="config.additionalActions">
      <button class="btn btn-link btn-outline-light" [cdkMenuTriggerFor]="menu">
        <span class="ngx-icon ngx-icon-menu"></span>
      </button>
      <ng-template #menu>
        <div class="ngx-menu" cdkMenu>
          <ng-container
            *ngIf="additionalActionsTemplate"
            [ngTemplateOutlet]="additionalActionsTemplate"
          >
          </ng-container>
        </div>
      </ng-template>
    </div>
  </th>
</tr>
<tr
  class="ngx-table__header ngx-table__header--draggable"
  *ngIf="config.headerEnabled && config.columnReorder"
  cdkDropList
  cdkDropListOrientation="horizontal"
  (cdkDropListDropped)="columnDrop($event)"
>
  <th *ngIf="config.checkboxes || config.radio" [style.width]="'3%'">
    <ng-container
      *ngIf="selectAllTemplate && config.checkboxes"
      [ngTemplateOutlet]="selectAllTemplate"
      [ngTemplateOutletContext]="{ $implicit: onSelectAllBinded }"
    >
    </ng-container>
    <label for="selectAllCheckboxes" *ngIf="!selectAllTemplate && config.checkboxes">
      <input
        type="checkbox"
        class="form-check-input"
        id="selectAllCheckboxesDrag"
        (change)="onSelectAll()"
      />
    </label>
  </th>
  <ng-container *ngFor="let column of columns; let colIndex = index; let last = last">
    <th
      class="ngx-table__header-cell ngx-table__header-cell--draggable"
      cdkDragLockAxis="x"
      cdkDrag
      [cdkDragStartDelay]="config.reorderDelay || 0"
      [class.pinned-left]="column.pinned"
      [ngStyle]="{ 'left.px': column.pinned ? 150 * colIndex : null }"
      #th
      [style.width]="getColumnWidth(column)"
      (mousedown)="onMouseDown($event, th)"
      (mouseup)="onMouseUp($event)"
      (mousemove)="onMouseMove($event)"
    >
      <div
        (click)="orderBy(column)"
        style="display: inline"
        cdkDragHandle
        [class.pointer]="isOrderEnabled(column)"
      >
        <div class="ngx-table__header-title">
          {{ column.title }}<span>&nbsp;</span>
          <em class="ngx-icon ngx-icon-pin" *ngIf="column.pinned"></em>
          <div [style.display]="config.orderEnabled ? 'inline' : 'none'">
            <em *ngIf="'desc' === column.key" class="ngx-icon ngx-icon-arrow-up"></em>
            <em *ngIf="'asc' === column.key" class="ngx-icon ngx-icon-arrow-down"></em>
          </div>
        </div>
      </div>
      <ng-container *ngIf="column.headerActionTemplate">
        <button class="btn btn-link btn-outline-light" [cdkMenuTriggerFor]="menu">
          <span class="ngx-icon ngx-icon-more"></span>
        </button>
        <ng-template #menu>
          <div class="ngx-menu" cdkMenu>
            <ng-container [ngTemplateOutlet]="headerActionTemplates[column.key]"></ng-container>
          </div>
        </ng-template>
      </ng-container>
      <div class="ngx-table__column-resizer" *ngIf="config.resizeColumn && !last"></div>
    </th>
  </ng-container>
  <th *ngIf="config.additionalActions || config.detailsTemplate || config.collapseAllRows">
    <div *ngIf="config.additionalActions">
      <button class="btn btn-link btn-outline-light" [cdkMenuTriggerFor]="menu">
        <span class="ngx-icon ngx-icon-menu"></span>
      </button>
      <ng-template #menu>
        <div class="ngx-menu" cdkMenu>
          <ng-container
            *ngIf="additionalActionsTemplate"
            [ngTemplateOutlet]="additionalActionsTemplate"
          >
          </ng-container>
        </div>
      </ng-template>
    </div>
  </th>
</tr>
<tr [style.display]="config.searchEnabled && !filtersTemplate ? 'table-row' : 'none'">
  <th *ngIf="config.checkboxes || config.radio"></th>
  <ng-container *ngFor="let column of columns; let colIndex = index">
    <th
      [class.pinned-left]="column.pinned"
      [ngStyle]="{ 'left.px': column.pinned ? 150 * colIndex : null }"
    >
      <table-search *ngIf="column.searchEnabled ?? true" [column]="column"></table-search>
    </th>
  </ng-container>
  <th *ngIf="config.additionalActions || config.detailsTemplate"></th>
</tr>
<ng-container *ngIf="filtersTemplate">
  <tr>
    <ng-container [ngTemplateOutlet]="filtersTemplate"></ng-container>
  </tr>
</ng-container>
